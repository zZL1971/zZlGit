<?xml version="1.0" encoding="UTF-8"?>
<grid>
	<config title="财务过账池" base="/main/jobPool/" xtype="uxgrid"  curd="RC"/>
	<form>
		<column xtype="textfield" fieldLabel="公司代码" name="bukrs" allowBlank="false"/>
		<column xtype="textfield" fieldLabel="售达方(客户)" name="kunnr" allowBlank="false"/>
		<column xtype="textfield" fieldLabel="SAP单号" name="sapCode" allowBlank="false"/>
		<column xtype="textfield" fieldLabel="订单号" name="zuonr" allowBlank="false"/>
		<column xtype="textfield" fieldLabel="订单总额" name="netwr" allowBlank="false"/>
		<column xtype="textfield" fieldLabel="备注" name="mark"/>
		<column xtype="textfield" fieldLabel="Job类型" name="jobType" value="CREDIT_JOB" hidden="true"/>
		<column xtype="textfield" fieldLabel="数据类型（手动新增）" name="sourceType" value="B" hidden="true"/>
		
		<column xtype="fieldset" title="系统信息">
			<column xtype="textfield" fieldLabel="创建人" name="createUser"  readOnly="true" fieldStyle="background:#E6E6E6"/>
			<column xtype="datefield" fieldLabel="创建时间" name="createTime" format="Y-m-d H:i:s" fieldStyle="background:#E6E6E6" readOnly="true"/>
			<column xtype="textfield" fieldLabel="更新人" name="updateUser"  readOnly="true" fieldStyle="background:#E6E6E6"/>
			<column xtype="datefield" fieldLabel="更新时间" name="updateTime" format="Y-m-d H:i:s" fieldStyle="background:#E6E6E6" readOnly="true"/>
		</column>
	</form>
 
	<search>
		<column layout="hbox" xtype="fieldcontainer">
			<column xtype="container" flex="1" layout="hbox">
				<column xtype="textfield" fieldLabel="订单号" name="zuonr"/>
				<column xtype="textfield" fieldLabel="售达方(客户)" name="kunnr"/>
				<column xtype="dictcombobox"  fieldLabel="处理状态" name="jobStatus"  dict="JOB_POOL_STA" showKey="true"/>
				<column xtype="dictcombobox"  fieldLabel="过账类型" name="sourceType"  dict="CDT_POOL_TYPE" showKey="true"/>
				
			</column>
		</column>
		<column layout="hbox" xtype="fieldcontainer">
			<column xtype="container" flex="1" layout="hbox">
				<column xtype="textfield" fieldLabel="创建人" name="createUser"  />
				<column xtype="datefield" fieldLabel="新增日期[S]" name="createTime" format="Y-m-d"/>
				<column xtype="datefield" fieldLabel="新增日期[E]" name="createTime" format="Y-m-d"/>
			</column>
		</column>
	</search>
	<head>
		<column xtype="rownumberer" width="30" align="right"/>
		<column dataIndex="bukrs" width="100" align="left" text="公司代码">
		</column>
		<column dataIndex="kunnr" width="120" align="center" text="售达方(客户)" filterable="true">
		</column>
		<column dataIndex="zuonr" width="130" align="left" text="订单号">
		</column>
		<column dataIndex="netwr" width="100" align="center"  text="订单总额" filterable="true">
		</column>
	 	<column dataIndex="jobStatusName" width="100" align="center" text="处理状态" filterable="true">
		</column>
		<column dataIndex="msg" width="200" align="left" text="处理信息">
		</column>
		<column dataIndex="sourceTypeName" width="100" align="center"  text="过账类型" filterable="true">
		</column>
		<column dataIndex="createTime" xtype="datecolumn" width="150" align="center" text="新增时间" format="Y-m-d H:i:s"/>
		<column dataIndex="createUser"  width="100" align="center" text="创建人" />
		<column dataIndex="beginDate" width="150" xtype="datecolumn" align="left" text="开始时间"  format="Y-m-d H:i:s" filterable="true">
		</column>
		<column dataIndex="endDate" width="150" xtype="datecolumn" text="结束时间"  format="Y-m-d H:i:s" filterable="true">
		</column>
		<column dataIndex="num" width="80" align="left" text="执行次数">
		</column>
		<column dataIndex="mark" width="200" align="left" text="备注">
		</column>
		<column dataIndex="batch" width="80" align="left" hidden="true" text="批次">
		</column>
		
	</head>
	<sql vname="SYS_CREDIT_JOB_POOL">
	<![CDATA[Select * from (select P.*,
			(SELECT v.DESC_ZH_CN FROM Sys_Data_Dict_View v where v.TRIE_KEY_VAL='JOB_POOL_STA' and v.KEY_VAL=p.job_status) job_status_name,
			(SELECT v.DESC_ZH_CN FROM Sys_Data_Dict_View v where v.TRIE_KEY_VAL='CDT_POOL_TYPE' and v.KEY_VAL=p.source_Type) source_Type_name
			from SYS_JOB_POOL P WHERE P.JOB_TYPE='CREDIT_JOB') where 1=1 ]]>
	</sql>
</grid>